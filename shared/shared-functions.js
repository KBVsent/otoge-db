const root=document.documentElement,toggleSwitch=document.getElementById("themeToggleCheckbox");window.matchMedia("(prefers-color-scheme: dark)").matches&&(toggleSwitch.checked=!1,root.setAttribute("data-theme","dark")),window.matchMedia("(prefers-color-scheme: light)").matches&&(toggleSwitch.checked=!0,root.setAttribute("data-theme","light"));const getTransitionEvent=()=>{const t=document.createElement("fakeelement"),e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(const n in e)if(void 0!==t.style[n])return e[n]},transitionEvent=getTransitionEvent();function switchTheme(t){root.classList.toggle("transitioning"),t.target.checked?root.setAttribute("data-theme","light"):root.setAttribute("data-theme","dark"),root.addEventListener(transitionEvent,transitionEndCallback)}function updateQueryStringParameter(t,e){var n=new URLSearchParams(window.location.search);if("URLSearchParams"in window){""===e?n.delete(t):n.set(t,e);var a=window.location.pathname+"?"+n.toString();history.pushState(null,"",a)}}function clearQueryStringParameter(){new URLSearchParams(window.location.search);if("URLSearchParams"in window){var t=window.location.pathname;history.pushState(null,"",t)}}function unescapeSlashes(t){if(null!==t){let e=t.replace(/(^|[^\\])(\\\\)*\\$/,"$&\\");try{e=JSON.parse(`"${e}"`)}catch(e){return t}return t.replace(/(^|[^\\])(\\\\)*\\$/,"$&\\")}return t}function appendSelectboxStateClass(t,e){""!==e?t.addClass("changed"):t.removeClass("changed")}function replaceUnitText(t){var e=flat_view?"譜面":"曲";return t.replace("unit",e)}toggleSwitch.addEventListener("change",switchTheme,!1),transitionEndCallback=t=>{root.removeEventListener(transitionEvent,transitionEndCallback),root.classList.remove("transitioning")},$(document).ready((function(){$("html").removeClass("page-loading")}));
var searchParams=new URLSearchParams(window.location.search);function checkPropertyAndValueExists(n,a){return!!n.hasOwnProperty(a)&&""!==n[a]}function sortLevels(n,a){return function(s,e,r,t){return"sort"===e?""===s[a]?addLeadingZero(s[n]):addLeadingZero(s[a]):s[n]}}function addLeadingZero(n){return""!=n?(lev_processed=parseInt(n)<10?"0"+n:n,lev_processed):""}function sortByLeadingZeros(n){return function(a,s){return addLeadingZero(a[n]).localeCompare(addLeadingZero(s[n]))}}function renderLvNum(n,a){return function(s,e,r){if("display"===e){var t=r[n].match(/^([0-9]{1,2})(\+)?$/);if(t){var c=t[1];return"+"===t[2]?`<div class="inner-wrap"><span class="lv-num-simple"><span class="num">${c}</span><span class="plus">+</span></span><span class="lv-num-precise">${r[a]}</span></div>`:`<div class="inner-wrap"><span class="lv-num-simple"><span class="num">${c}</span></span><span class="lv-num-precise">${r[a]}</span></div>`}return`<div class="inner-wrap"><span class="lv-num-simple"><span class="num">${r[n]}</span></span><span class="lv-num-precise">${r[a]}</span></div>`}return s}}function renderChartDifficultyNameAndLv(n,a,s,e,r){return function(s,t,c){if("display"===t){var i=convertDifficultyNames(c[n],!1,r),l="we_kanji"===c[n]?"☆"+c[e]:c[e],p=c[a].match(/^([0-9]{1,2})(\+)?$/);if(p){var u=p[1];return"+"===p[2]?`<div class="inner-wrap"><span class="diff-name">${i}</span><span class="lv-num-wrap"><span class="lv-num-simple"><span class="num">${u}</span><span class="plus">+</span></span><span class="lv-num-precise">${l}</span></span></div>`:`<div class="inner-wrap"><span class="diff-name">${i}</span><span class="lv-num-wrap"><span class="lv-num-simple"><span class="num">${u}</span></span><span class="lv-num-precise">${l}</span></span></div>`}return`<div class="inner-wrap"><span class="diff-name">${i}</span><span class="lv-num-wrap"><span class="lv-num-simple"><span class="num">${c[a]}</span></span><span class="lv-num-precise">${l}</span></span></div>`}return s}}function renderChartLinkBtn(n){return function(n,a,s){return"display"===a?chartLinkBtn(s.chart_link):n}}function chartLinkBtn(n){return""!==n?`<a class="btn chartlink" target="_blank" rel="noopener noreferrer" onclick="event.stopPropagation();" href="https://sdvx.in/chunithm/${n}.htm">\n                    <span class="img"></span><span>譜面確認</span>\n                </a><span class="chart-provider">sdvx.in 提供</span>`:""}function renderChartDifficultyName(n,a){return function(s,e,r){return"display"===e?'<span class="diff-name">'+convertDifficultyNames(r[n],!1,a)+"</span>":s}}function convertDifficultyNames(n,a,s){const e=s[n];return a?`${Object.keys(s).indexOf(n)+1} ${e}`:e}function sortByDifficultyCategory(n,a){return function(s,e){return convertDifficultyNames(s[n],!0,a).localeCompare(convertDifficultyNames(e[n],!0,a))}}function renderInWrapper(){return function(n,a,s){return"display"===a?'<div class="inner-wrap">'+n+"</div>":n}}function flattenMusicData(n,a,s,e){return a?n.map((n=>Object.keys(s).map((a=>e(n,a))))).flat().filter((n=>!!n)):n}function formatDate(n,a){var s=n.slice(0,4),e=n.slice(4,6),r=n.slice(6,8),t=`${s}-${e}-${r}`;if("JP"==a)var c=((new Date).getFullYear()==s?"":s+"/")+`${e}/${r}(${["日","月","火","水","木","金","土"][new Date(t).getDay()]})`;else c=t;return c}$(document).ready((function(){if($("#table").on("column-visibility.dt",(function(){$.fn.dataTable.tables({visible:!0,api:!0}).columns.adjust()})),$("select#chart_lev").on("change",(function(){var n=$("#table").DataTable(),a=$(this),s=$(this).val(),e=$.fn.dataTable.util.escapeRegex($(this).val());"filter"==a.data("type")?(n.column("chart_lev:name").search(e?"^"+e+"$":"",!0,!1),updateQueryStringParameter("chart_lev",s),n.draw()):window.location.href="./lv?chart_lev="+encodeURIComponent(s)})),"URLSearchParams"in window){var n=searchParams.get("chart_lev");if(null!==n){var a=unescapeSlashes(n);$("select#chart_lev").val(a)}}$("button.reset-search").on("click",(function(){$("#table").DataTable().order(default_order).search("").columns().search("").draw(),clearQueryStringParameter(),$(".toolbar.filters select").prop("selectedIndex",0).removeClass("changed"),console.log("search reset")}))}));
